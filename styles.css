/* ======================================================================
  SAAGS – Hoja de Estilos Principal (styles.css)
  ----------------------------------------------------------------------
  Propósito
  Define diseño global, utilidades, componentes y adaptaciones
  responsive del sitio oficial de la Sociedad Astronómica de
  Aguascalientes.

  Filosofía
  - Prioriza rendimiento (carga diferida, fondos condicionales).
  - Accesibilidad pragmática (focus visible, contrastes, scroll-margin).
  - Escalabilidad: secciones numeradas para localizar rápido.
  - Evita dependencias adicionales (sólo Bootstrap + utilidades personalizadas).

  Estructura (índice rápido)
    1. Variables globales & design tokens
    2. Reset & base tipográfica / body
    3. Utilidades (layout helpers, contenedores, spacing)
    4. Componentes (fondos, botones, tarjetas, contadores, animaciones)
    5. Navbar y navegación
    6. Hero (estructura y variantes responsive)
    7. Sección "Nosotros" / contadores / equipo
    8. Actividades & tarjetas de eventos
    9. Galería (grid, lightbox helpers, animaciones)
   10. Calendario astronómico (grid adaptable, badges)
   11. Equipo (cards, social icons)
   12. Footer
   13. GLightbox overrides
   14. Media queries agrupadas (breakpoints clave y ajustes condicionales)
   15. Preferencias de usuario (reduced-motion, reduced-data)
   16. Overrides específicos por rango (tablets, iPad, etc.)

  Notas de mantenimiento
  - Al agregar una nueva sección numérala y actualiza índice.
  - Usa variables (tokens) antes de introducir nuevos valores fijos.
  - Para eliminar selectores: verificar safelist en purgecss.config.cjs.
  - Mantener comentarios concisos; más documentación va en README.

  Última actualización doc: 2025-08-10
  ====================================================================== */
/* 1. Variables globales: paleta, tipografías y espaciados reutilizables */
:root {
  --navbar-height: 76px;

  /* Paleta general */
  --color-bg: #0a1128;
  --color-bg-alt: #05070d;
  --color-surface: rgba(13, 36, 90, 0.7);
  --color-surface-alt: rgba(10, 17, 40, 0.68);
  --color-primary: #304d9d;
  --color-primary-hover: #1a3a8f;
  --color-accent: #7cb9e8;
  --color-accent-warm: #ffe066;
  --color-border: #304d9d;
  --color-text: #f0f0f0;
  --color-text-muted: #e7eaf6;

  /* Overlays */
  --overlay-top: 0.48;
  --overlay-bottom: 0.65;

  /* Timing & easing */
  --easing-standard: cubic-bezier(.4, .2, .2, 1);
  --dur-fast: .18s;
  --dur-med: .30s;

  /* Calendario / Paneles */
  --c-fondo: #1b1f24;
  --c-panel: #0d1f42;
  --c-panel-alt: #09152b;
  --c-borde: #2f5d9d;
  --c-acento: #3286ff;
  --c-acento-suave: #74b5ff;
  --c-texto: #f0f2f6;
  --c-texto-dim: #c3c9d4;

  /* Radius / Spacing */
  --rad-sm: 4px;
  --rad-md: 8px;
  --sp-1: .25rem;
  --sp-2: .5rem;
  --sp-3: .75rem;
  --sp-4: 1rem;
  --sp-5: 1.5rem;

  /* Misc */
  --tr-fast: .18s;
  --font-base: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Ubuntu, "Helvetica Neue", Arial, sans-serif;
}

/* 2. Reset y base: normalización y estilos generales */
*, *::before, *::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  color-scheme: dark;
  font-family: "Montserrat", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  line-height: 1.5;
}

body {
  margin: 0;
  background: var(--color-bg);
  color: var(--color-text);
  min-height: 100dvh;
  /* Reserva espacio fijo para el navbar flotante */
  padding-top: var(--navbar-height);
}

/* === Utilidades globales añadidas === */
.container-narrow { max-width: 820px; margin-inline: auto; width:100%; padding-left:clamp(1rem,2vw,1.5rem); padding-right:clamp(1rem,2vw,1.5rem); }
.section-tight { padding-top: clamp(1.5rem, 4vh, 3rem); padding-bottom: clamp(1.5rem, 4vh, 3rem); }

/* Media wrapper para eventos (sustituye inline style height:270px) */
.event-card .event-media-wrap { height:270px; overflow:hidden; }
@media (max-width: 575.98px){ .event-card .event-media-wrap { height:220px; } }
@media (min-width: 992px){ .event-card .event-media-wrap { height:300px; } }

/* Animaciones suaves para galería oculta */
@keyframes galeriaFadeIn {
  0% { opacity: 0; transform: translateY(14px); }
  60% { opacity: 1; }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes galeriaFadeOut {
  0% { opacity: 1; transform: translateY(0); }
  100% { opacity: 0; transform: translateY(10px); }
}
@keyframes btnFadeOut {
  0% { opacity: 1; transform: scale(1); }
  100% { opacity: 0; transform: scale(.85); }
}
@keyframes btnFadeIn {
  0% { opacity: 0; transform: scale(.85); }
  100% { opacity: 1; transform: scale(1); }
}

.galeria-anim-enter { animation: galeriaFadeIn .55s var(--easing-standard) both; }
.galeria-anim-exit  { animation: galeriaFadeOut .4s var(--easing-standard) both; }
.btn-galeria-anim-hide { animation: btnFadeOut .38s ease forwards; }
.btn-galeria-anim-show { animation: btnFadeIn .34s ease both; }

@media (prefers-reduced-motion: reduce) {
  .galeria-anim-enter,
  .galeria-anim-exit,
  .btn-galeria-anim-hide,
  .btn-galeria-anim-show { animation: none !important; }
}

[id] {
  scroll-margin-top: calc(var(--navbar-height) + 12px);
}

img,
video,
canvas,
iframe {
  max-width: 100%;
  height: auto;
  display: block;
}

:focus-visible {
  outline: 3px solid var(--color-accent-warm);
  outline-offset: 2px;
  border-radius: 4px;
}

html,
body {
  width: 100%;
  max-width: 100%;
  overflow-x: clip;
}

/* ----------------------------
   Ajustes responsivos extras 2025-08:
   - Mejor legibilidad en pantallas muy pequeñas (<420px)
   - Optimización de hero y navegación intermedia (md)
   - Calendario adaptable a 2 y 1 columna en anchos reducidos
   - Correcciones de spacing para evitar scroll horizontal
-------------------------------- */

/* Hero tipografía y botones unificados (aplica a todos los dispositivos) */
.hero-section h1 { text-align: center; }
/* Subtítulo centrado */
.hero-section .lead { text-align: center; }
.hero-body .hero-actions { display: flex; }
.hero-section h1 { text-align: center; }
/* Subtítulo centrado */
.hero-section .lead { text-align: center; }
.hero-body .hero-actions { display: flex; }
.hero-section h1 {
  margin: 0 0 1rem;
  font-size: clamp(2.2rem, 7vw, 4rem);
  line-height: 1.15;
  overflow-wrap: anywhere;
}
.hero-section .lead {
  font-size: clamp(1.05rem, 3vw, 2rem);
  font-weight: 450;
  max-width: 40ch;
  margin: 0 auto 2.1rem;
  color: rgba(240, 240, 240, .92);
  text-shadow: 0 2px 8px rgba(0, 0, 0, .6);
  letter-spacing: .04em;
}
.hero-section .btn {
  padding: .7rem 1.7rem;
  font-size: 1.6rem;
  font-weight: 600;
  letter-spacing: .04em;
  border-width: 2px;
  border-radius: 50px;
  transition: all .3s ease;
}
.hero-section .btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  box-shadow: 0 5px 20px rgba(48, 77, 157, 0.3);
}
.hero-section .btn-primary:hover {
  background-color: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(48, 77, 157, 0.4);
}
.hero-section .btn-outline-light:hover {
  color: #0a1128;
  background-color: #fff;
  border-color: #fff;
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
}


/* Hero botones diseño especial >=768px (ajuste de proximidad) */
@media (min-width: 768px) {
  .hero-section .d-flex { 
    justify-content: center; 
    align-items: center; 
    /* sin gap aquí; reservado para >=1024px */
    flex-direction: row !important; 
    flex-wrap: nowrap; 
    max-width: 100%; 
    overflow-x: clip; 
    margin-inline: auto; 
  }
  .hero-section .d-flex .btn { white-space: nowrap; }
  .hero-section .d-flex .btn { 
    padding: .7rem 1.7rem;
    font-size: 1.6rem;
    font-weight: 600;
    letter-spacing: .04em;
    border-width: 2px;
    border-radius: 50px;
    transition: background .35s, box-shadow .35s, transform .25s; 
  }
  .hero-section .btn-primary { 
    background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-primary-hover) 100%); 
    border: none; 
    box-shadow: 0 6px 22px rgba(48,77,157,.35); 
  }
  .hero-section .btn-primary:hover, 
  .hero-section .btn-primary:focus-visible { 
    transform: translateY(-2px); 
    box-shadow: 0 10px 26px rgba(48,77,157,.45); 
    filter: brightness(1.08); 
  }
  .hero-section .btn-outline-light { 
    background: #ffffff; 
    color: #0a1128; 
    border: 2px solid #ffffff; 
    box-shadow: 0 6px 22px rgba(255,255,255,.18); 
  }
  .hero-section .btn-outline-light:hover, 
  .hero-section .btn-outline-light:focus-visible { 
    transform: translateY(-2px); 
    box-shadow: 0 10px 28px rgba(255,255,255,.30); 
    filter: brightness(1.05); 
  }
  .hero-section .d-flex .btn:focus-visible { outline: 3px solid #ffe066; outline-offset: 3px; }
}

/* Breakpoint banda problemática (820–860px) donde el menú podía desbordar */
@media (min-width: 820px) and (max-width: 860px) {
  .navbar-nav { gap: .45rem; }
  .navbar-nav .nav-link { padding: .42rem .6rem; font-size: .9rem; }
  .navbar-brand span { font-size: 1.45rem; }
}

/* Evitar saltos verticales si el menú se parte: forzar no-wrap y scroll horizontal suave si aún excede */
@media (min-width: 768px) and (max-width: 950px) {
  .navbar-nav { flex-wrap: nowrap; overflow-x: auto; scrollbar-width: none; }
  .navbar-nav::-webkit-scrollbar { display: none; }
}

@media (max-width: 575.98px) {
  /* Espaciado más compacto en secciones con mucho texto */
  section { padding-left: 0.85rem; padding-right: 0.85rem; }
  #nosotros .nosotros-text-bg { padding: 1.25rem 1.1rem; }
  .navbar-nav .nav-link { font-size: 1rem; padding: .55rem .9rem; }
  .event-card .badge-evento { font-size: 1rem; }
  .event-card .p-4 { padding: 1.1rem 1rem; }
  .hero-section .btn { font-size: 1.05rem; padding: .75rem 1.6rem; }
  /* Grid de equipo: forzar 2 columnas más balanceadas */
  #equipo .row.g-4 > [class*="col-"] { padding-left: 6px; padding-right: 6px; }
  .team-card { font-size: .92rem; }
  .team-name { font-size: 1.05rem; }
  .team-role { font-size: .85rem; line-height: 1.2; }
  .team-social a { width: 28px; height: 28px; font-size: .85rem; }
}

@media (max-width: 420px) {
  /* Ultra small devices */
  .navbar-brand span { font-size: 1.15rem; }
  .hero-section h1 { font-size: clamp(1.7rem, 8.5vw, 2.2rem); }
  .hero-section .lead { font-size: clamp(.95rem, 4vw, 1.15rem); }
  .btn-galeria { width: 100%; font-size: 1rem; padding: .7rem 1.2rem; }
  .calendario { padding-left: .75rem; padding-right: .75rem; }
  .gallery-card h5 { font-size: 1rem; }
  .gallery-card p { font-size: .95rem; }
  .badge-evento { font-size: .9rem; }
  .evento { font-size: .9rem; grid-template-columns: 1fr; }
  .evento__fecha { margin-bottom: .25rem; }
  /* Equipo ultra pequeño: reducir avatars */
  .avatar-wrapper { width: 150px; }
}

/* Calendario: permitir columnas más angostas en móviles muy estrechos */
@media (max-width: 360px) {
  .calendario__grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
}
@media (max-width: 320px) {
  .calendario__grid { grid-template-columns: 1fr; }
}

/* Event cards: altura flexible en pantallas pequeñas para reducir scroll */
@media (max-width: 575.98px) {
  .event-card [style*="height:270px"],
  .event-card .bg-dark[style*="height:270px"] { height: 52vw !important; max-height: 220px; }
}

/* Mejoras de accesibilidad / densidad para dispositivos con poca altura */
@media (max-height: 520px) and (orientation: landscape) {
  .navbar { min-height: 60px; }
  :root { --navbar-height: 60px; }
  .hero-section { min-height: calc(var(--vh, 1vh) * 100 - 10px); }
  .hero-section h1 { font-size: clamp(1.6rem, 5.2vw, 2.4rem); }
  .hero-section .lead { font-size: clamp(.9rem, 2.2vw, 1.1rem); margin-bottom: 1.2rem; }
  .hero-section .btn { padding: .6rem 1.2rem; font-size: .95rem; }
}

/* Evitar que badges largos provoquen overflow en tarjetas del calendario */
.evento__texto { word-break: break-word; }

/* Ajuste de smoother scroll en iOS: mejorar inercia (solo Safari/WebKit) */
@supports (-webkit-touch-callout: none) {
  body { -webkit-overflow-scrolling: touch; }
}

/* 3. Utilidades: alineación y títulos de sección */
.text-justify {
  text-align: justify;
}

.text-justify-responsive {
  text-align: justify;
}

.section-title {
  display: inline-block;
  padding-bottom: 5px;
  margin-bottom: 30px;
  color: var(--color-accent);
  border-bottom: 2px solid var(--color-accent);
}

/* 4. Componentes: fondos, botones, contadores, feedback */

/* Fondo estrellas (solo color base; imágenes se asignan en media queries) */
.bg-stars {
  position: fixed;
  inset: 0;
  z-index: -1;
  width: 100%;
  height: 100%;
  background: #0a1128;
  background-image: url("../img/background/galaxybg_pc.webp?v=7");
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  /* background-attachment: fixed;  <-- quitar */
  will-change: transform;
  transform: translateZ(0);
}
/* Escritorio */
@media (min-width: 1024px) {
  .bg-stars { background-image: url("../img/background/galaxybg_pc.webp?v=4"); }
}
/* Tablets */
@media (min-width: 768px) and (max-width: 991.98px) {
  .bg-stars { background-image: url("../img/background/galaxybg_pc.webp?v=4"); }
}
/* Tablets <=991.98px: fondo en body */
@media (max-width: 991.98px) {
  .bg-stars { display: none !important; }
  body {
    background: #0a1128 url("../img/background/galaxybg_100.webp?v=7") top center/cover no-repeat;
    background-attachment: scroll;
  }
}
/* Móviles <768px: body::before */
@media (max-width: 767.98px) {
  body::before {
    background-image: url("../img/background/galaxybg_100.webp?v=4");
    background-image: image-set(
      url("../img/background/galaxybg_100.webp?v=4") 1x,
      url("../img/background/galaxybg_pc.webp?v=4") 2x
    );
  }
}

/* Botón primario personalizado */
.btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
}
.btn-primary:hover {
  background-color: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
}

/* Contadores de sección nosotros */
.count-box {
  padding: 20px;
  margin-bottom: 20px;
  background-color: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: 5px;
}
.count-number {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--color-accent);
}

/* Mensaje de éxito para formularios */
.mensaje-exito {
  font-size: 1rem;
  color: #217a3b;
  background: #d1f1da;
  border: 1px solid #b2e2c5;
  border-radius: .5rem;
  box-shadow: 0 1px 6px #217a3b24;
  transition: opacity .3s;
}

/* 5. Navbar: navegación principal y estilos de menú */
.navbar {
  display: flex;
  align-items: center;
  min-height: var(--navbar-height);
  padding: .50rem 0;
  letter-spacing: .03em;
  background-color: rgba(13, 36, 90, 0.95);
  border-bottom: 0.5px solid var(--color-border);
  box-shadow: 0 2px 12px rgba(13, 36, 90, 0.18);
}
.navbar .container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.navbar-brand {
  display: flex;
  align-items: center;
  gap: 12px;
}
.navbar-brand img {
  width: 54px;
  height: 54px;
  object-fit: cover;
  border-radius: 50%;
  box-shadow: 0 0 10px #1a3a8f77;
}
.navbar-brand span {
  font-size: 2rem;
  font-weight: 700;
  letter-spacing: .06em;
  color: var(--color-accent);
}
.navbar-nav {
  display: flex;
  align-items: center;
  gap: 1.3rem;
}
.navbar-nav .nav-link {
  padding: .5rem 1.2rem;
  margin: 0 .1rem;
  font-size: 1.15rem;
  font-weight: 500;
  letter-spacing: .04em;
  color: var(--color-text);
  border-radius: .7rem;
  transition: background .22s, color .22s, box-shadow .22s;
}
.navbar-nav .nav-link:hover,
.navbar-nav .nav-link.active {
  color: var(--color-accent-warm) !important;
  background: rgba(124, 185, 232, 0.13);
  box-shadow: 0 2px 8px #7cb9e86c;
}
.navbar-dark .navbar-toggler {
  border: none;
  outline: none;
  box-shadow: none !important;
}

/* 6. Hero: banner principal con fondo e intro */
.hero-section {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 100dvh;
  min-height: calc(var(--vh, 1vh) * 100);
  padding: clamp(2.2rem, 6vh, 5rem) 0 clamp(2.5rem, 7vh, 5.5rem); /* Ajuste de padding */
  background: #0d245a; /* Solo color base, la imagen la aporta el <picture> interno */
  overflow: clip;
}
.hero-section::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    rgba(13, 36, 90, var(--overlay-top, .48)),
    rgba(7, 11, 35, var(--overlay-bottom, .65))
  );
  pointer-events: none;
  z-index: 0;
}
.hero-body {
  width: min(100% - 2rem, 760px);
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 2rem);
  padding-top: clamp(1.2rem, 3.5vh, 2.8rem);
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center; /* centrado universal */
}
.hero-bg-media {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}
.hero-bg-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}
.hero-section h1 { text-align: center; }
/* Subtítulo centrado */
.hero-section .lead { text-align: center; }
/* --- Fix: asegurar que la imagen <picture> del hero sea visible (antes z-index:-1 la escondía) --- */
.hero-section > .container > picture { z-index: 0 !important; pointer-events: none; }
.hero-section::before { z-index: 1; }
.hero-section > .container > *:not(picture) { position: relative; z-index: 2; }
.hero-body .hero-actions { display: flex; }
/* Hero ajustado: eliminar espacios azules arriba/abajo */
.hero-section {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  min-height: calc(100dvh - var(--navbar-height));
  padding: 0; /* quitamos padding externo que creaba franjas */
  background: #0d245a; /* color base detrás de la imagen */
  overflow: clip;
}
 /* Recolocamos el espaciado interno en el contenedor del hero */
.hero-section > .container {
  padding-top: calc(var(--navbar-height) + 2.2rem) !important; /* separación desde navbar */
  padding-bottom: 2.4rem !important; /* margen inferior reducido */
}
@media (max-width: 575.98px) {
  .hero-section > .container { padding-top: calc(var(--navbar-height) + 1.6rem) !important; padding-bottom: 1.9rem !important; }
}
@media (min-width: 992px) {
  .hero-section > .container { padding-top: calc(var(--navbar-height) + 3rem) !important; padding-bottom: 3rem !important; }
}
 /* Tablets / mid-width (768–1023px): eliminar franjas azules extra */
@media (min-width: 768px) and (max-width: 1023.98px) {
  .hero-section { padding: 0 !important; }
  .hero-section > .container { padding-top: calc(var(--navbar-height) + 1.4rem) !important; padding-bottom: 1.8rem !important; }
}
 /* Compactar inicio de la sección Nosotros para que no aparezca un bloque azul intermedio */
#nosotros { padding-top: 2.2rem !important; }
@media (max-width: 575.98px) { #nosotros { padding-top: 1.6rem !important; } }
/* Estilos tipográficos para el título y subtítulo del hero */
.hero-section h1,
.hero-section .lead {
  color: rgba(240, 240, 240, .92);
  text-shadow: 0 2px 8px rgba(0, 0, 0, .6);
  letter-spacing: .04em;
}
.hero-section .btn {
  padding: .9rem 2.2rem;
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: .04em;
  border-width: 2px;
  border-radius: 50px;
  transition: all .3s ease;
}
.hero-section .btn-primary {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  box-shadow: 0 5px 20px rgba(48, 77, 157, 0.3);
}
.hero-section .btn-primary:hover {
  background-color: var(--color-primary-hover);
  border-color: var(--color-primary-hover);
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(48, 77, 157, 0.4);
}
.hero-section .btn-outline-light:hover {
  color: #0a1128;
  background-color: #fff;
  border-color: #fff;
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
}

@media (max-height: 560px) {
  .hero-section {
    justify-content: flex-start;
    padding-top: calc(var(--navbar-height) + 1rem + env(safe-area-inset-top));
  }
  .hero-body { padding-top: 0; }
}

@media (max-width: 340px) {
  .hero-buttons .btn {
    min-width: 100%;
  }
  .hero-section h1 {
    font-size: clamp(1.9rem, 8vw, 2.4rem);
  }
}

/* Hero: centrar y apilar contenido en TODOS los dispositivos */
.hero-body, .hero-section > .container {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 0.75rem;
}
.hero-body h1, .hero-body .lead,
.hero-section > .container h1,
.hero-section > .container .lead { text-align: inherit; margin-left: 0; margin-right: 0; }
.hero-body .hero-actions,
.hero-section > .container .d-flex {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: center;
  width: 100%;
  gap: .75rem;
}
.hero-body .hero-actions .btn,
.hero-section > .container .d-flex .btn {
  width: 100%;
  max-width: 360px;
  margin-inline: auto;
}

/* 7. Nosotros: presentación de la asociación */
.nosotros-text-bg {
  background: var(--color-surface-alt);
  padding: 1.5rem 2rem;
  border-radius: 1rem;
  box-shadow: 0 2px 16px #0a112850;
  margin-bottom: 2rem;
}

/* 8. Actividades: tarjetas y eventos destacados */
#actividades p {
  font-size: 1.1rem;
  padding-top: 1.2rem;
  margin-bottom: 1rem !important;
  padding-bottom: 0.5rem !important;
}
#actividades .card-footer {
  margin-top: 0.2rem !important;
}
#actividades .card {
  display: flex;
  flex-direction: column;
  height: 100%;
  margin-bottom: 2rem;
  background: linear-gradient(135deg, rgba(13, 36, 90, 0.92) 80%, rgba(124, 185, 232, 0.09) 100%);
  border: none;
  border-radius: 1.3rem;
  box-shadow: 0 8px 32px 0 rgba(13, 36, 90, 0.17), 0 2px 8px 0 rgba(124, 185, 232, 0.13);
  transition: transform .22s var(--easing-standard), box-shadow .22s;
  overflow: hidden;
}
#actividades .card:hover {
  transform: translateY(-7px) scale(1.025);
  border-color: #f7c948;
  box-shadow: 0 16px 40px 0 rgba(0, 123, 255, 0.25), 0 4px 16px rgba(124, 185, 232, 0.25);
}
#actividades .card-img-top,
#actividades .img-ajustable {
  width: 100%;
  aspect-ratio: 4 / 3;
  padding: 0;
  object-fit: cover;
  object-position: center;
  background: #0a1128;
  border-top-left-radius: 1.3rem;
  border-top-right-radius: 1.3rem;
  box-shadow: 0 2px 8px rgba(124, 185, 232, 0.10);
  transition: filter .22s;
}
#actividades .card:hover .card-img-top {
  filter: brightness(1.12) saturate(1.07);
}
#actividades .card-body {
  padding: 1.2rem 1.1rem 0 1.1rem;
  background: transparent;
}
.card-actividad-title {
  margin-bottom: .7rem;
  font-family: 'Montserrat', sans-serif;
  font-size: 1.2rem;
  font-weight: 700;
  letter-spacing: .03em;
  color: var(--color-accent-warm);
  text-shadow: 0 2px 8px rgba(13, 36, 90, 0.18);
}
.card-actividad-title i {
  margin-right: 7px;
  color: var(--color-accent-warm);
}
#actividades .card-text {
  margin-bottom: 0;
  font-size: 1rem;
  color: var(--color-text-muted);
}
#actividades .card-footer {
  padding: .3rem 0 1.1rem;
  background: transparent;
  border-top: none;
}
#actividades .card-footer .btn {
  display: inline-block;
  margin-top: .1rem;
  padding: 1rem 2rem;
  font-size: 1.3rem;
  font-weight: 700;
  line-height: 1.4;
  letter-spacing: .02em;
  color: #fff;
  text-align: center;
  background: linear-gradient(90deg, #1a2540 55%, #304d9d 130%);
  border: none;
  border-radius: 1.6rem;
  box-shadow: 0 4px 18px rgba(32, 56, 151, 0.13), 0 2px 8px #0002;
  cursor: pointer;
  transition: background .28s, color .18s, box-shadow .18s, transform .16s;
}
#actividades .card-footer .btn:active,
#actividades .card-footer .btn.btn-touched {
  transform: translateY(-2px) scale(1.04);
  color: #1a2540;
  background: linear-gradient(90deg, #ffe066 10%, #233d6c 100%);
  box-shadow: 0 6px 24px #ffe06644, 0 2px 8px #7cb9e866;
}
.event-card {
  border-left: 4px solid var(--color-accent);
}
.badge-evento {
  padding: .2em .5em;
  font-size: 1.2rem;
  line-height: 1.3;
}
.badge-evento small {
  font-size: .85em;
}

/* Versión corta del enlace de Calendario: oculta por defecto */
.nav-text-short { display: none; }
.nav-text-full { display: inline; }

/* Compresión específica para iPad Mini / Air (ancho 768–880px) */
@media (min-width: 768px) and (max-width: 880px) {
  .navbar-brand img { width: 42px; height: 42px; }
  .navbar-brand span { font-size: 1.35rem; letter-spacing: .03em; }
  .navbar-nav { gap: .35rem; }
  .navbar-nav .nav-link {
    padding: .38rem .55rem;
    font-size: .82rem;
    letter-spacing: .01em;
    line-height: 1.1;
  }
  /* Mostrar versión corta del texto largo para ahorrar espacio */
  .nav-text-full { display: none; }
  .nav-text-short { display: inline; }
  /* Evitar incremento de altura al comprimirse */
  :root { --navbar-height: 70px; }
  .navbar { min-height: var(--navbar-height); }
}

/* Mobile refinement: make event badges smaller so they block less of the poster */
@media (max-width: 575.98px) {
  .event-card .position-absolute.top-0.end-0 { margin: .55rem .55rem 0 0 !important; }
  .event-card .badge-evento {
    font-size: .9rem;           /* smaller text */
    line-height: 1.15;
    padding: .35em .6em .4em;   /* tighter box */
    border-radius: 10px;        /* slightly rounder */
    background: rgba(0,123,255,.85); /* more translucent */
    backdrop-filter: blur(2px);
  }
  .event-card .badge-evento small {
    font-size: .65em;           /* reduce secondary line */
    line-height: 1.1;
  }
  /* vertical spacing between stacked badges */
  .event-card .badge-evento + .badge-evento { margin-top: .4rem; }
}

/* 9. Galería: imágenes y recursos multimedia */
.gallery-card {
  display: flex;
  flex-direction: column;
  height: 100%;
  margin: 0;
  background: linear-gradient(135deg, rgba(24, 27, 31, 0.93) 0%, rgba(24, 27, 31, 0.88) 70%, rgba(24, 27, 31, 0.97) 100%);
  border-left: 4px solid #181b1f;
  border-radius: 1.1rem;
  box-shadow: 0 2px 8px 0 rgba(24, 27, 31, 0.07);
  transition: transform .16s, box-shadow .18s;
  overflow: hidden;
}
.gallery-card:hover {
  transform: translateY(-7px) scale(1.024);
  border-color: var(--color-accent-warm);
  box-shadow: 0 12px 36px 0 rgba(120, 180, 255, 0.18), 0 3px 12px 0 #7cb9e866;
}
.gallery-card .bg-dark {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 99.5%;
  margin: .1em auto;
  padding: 0;
  background: rgba(24, 27, 31, 0.035) !important;
  border-radius: 1.1rem 1.1rem 0 0;
  aspect-ratio: 16 / 9;
  overflow: hidden;
}
.gallery-card picture,
.gallery-card img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  background: transparent;
  border-radius: 1.1rem 1.1rem 0 0;
  transition: filter .18s;
}
.gallery-card:hover img {
  filter: brightness(1.11) saturate(1.09);
}
.gallery-card .p-4 {
  display: flex;
  flex-direction: column;
  justify-content: center;
  flex: 1 1 auto;
  padding: .45em 1rem .2em;
  background: transparent;
}
.gallery-card h5 {
  margin-bottom: .5rem;
  font-size: 1.13rem;
  font-weight: 800;
  letter-spacing: .015em;
  color: var(--color-accent);
  text-shadow: 0 2px 12px #000b, 0 1.5px 8px #181b1f66;
}
.gallery-card p {
  margin-bottom: .1rem;
  font-size: 1.05rem;
  color: var(--color-text-muted);
  text-shadow: 0 2px 12px #000b, 0 1.5px 8px #181b1f66;
}
.btn-galeria {
  padding: .8rem 2.5rem;
  font-size: 1.2rem;
  font-weight: 600;
  letter-spacing: .05em;
  text-transform: uppercase;
  color: var(--color-text);
  background: linear-gradient(145deg, #1a3a8f, #304d9d);
  border: 2px solid rgba(124, 185, 232, 0.3);
  border-radius: 50px;
  box-shadow: 0 4px 15px rgba(13, 36, 90, 0.4), inset 0 1px 2px rgba(255, 255, 255, 0.1);
  transition: all .3s ease;
}
.btn-galeria:hover {
  color: #fff;
  background: linear-gradient(145deg, #304d9d, #1a3a8f);
  border-color: rgba(36, 42, 99, 0.8);
  box-shadow: 0 8px 25px rgba(124, 185, 232, 0.3);
  transform: translateY(-3px);
}
.btn-galeria:active {
  background: var(--color-accent-warm);
  color: #0a1128;
  border-color: var(--color-accent-warm);
  box-shadow: 0 2px 5px rgba(7, 19, 46, 0.5);
  transform: translateY(1px);
  transition: all .1s ease;
}

/* 10. Calendario: eventos y meses destacados */
.calendario {
  font-family: var(--font-base);
  background: var(--c-fondo);
  color: var(--c-texto);
  padding: var(--sp-5) clamp(1rem, 4vw, 3rem);
  max-width: 1250px;
  margin: 0 auto;
}
.calendario__header {
  margin-bottom: var(--sp-4);
}
.calendario__title {
  margin: 0 0 .25rem;
  font-size: clamp(1.8rem, 2.4vw, 2.4rem);
  font-weight: 600;
  letter-spacing: .5px;
}
.calendario__subtitle {
  margin: 0 0 var(--sp-3);
  font-size: 1.5rem;
  font-weight: 500;
  color: var(--c-texto-dim);
}
.calendario__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: clamp(.9rem, 1.8vw, 1.25rem);
  align-items: start;
  margin-bottom: var(--sp-4);
}
.mes {
  background: linear-gradient(145deg, var(--c-panel) 0%, var(--c-panel-alt) 90%);
  border: 1px solid rgba(50, 134, 255, 0.25);
  border-radius: var(--rad-md);
  padding: .65rem .75rem .5rem;
  display: flex;
  flex-direction: column;
  gap: .35rem;
  position: relative;
  min-height: 158px;
}
.mes__titulo {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 600;
  letter-spacing: .5px;
  color: var(--c-acento-suave);
  padding: 0 0 .35rem;
  border-bottom: 1px solid rgba(50, 134, 255, 0.25);
}
.eventos {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: .15rem;
}
.evento {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: .55rem;
  align-items: start;
  background: rgba(0, 0, 0, .18);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: var(--rad-sm);
  padding: .35rem .5rem .4rem;
  line-height: 1.25;
  font-size: 1rem;
}
.evento:not(:last-child) {
  margin-bottom: .15rem;
}
.evento__fecha {
  background: var(--c-acento);
  padding: .15rem .45rem;
  border-radius: 16px;
  font-weight: 600;
  font-size: 1rem;
  letter-spacing: .5px;
  display: inline-flex;
  align-items: center;
  gap: 2px;
  color: #fff;
  white-space: nowrap;
  line-height: 1;
  position: relative;
  top: 1px;
}
.evento__texto {
  color: var(--c-texto);
}
time {
  font-style: normal;
}
.calendario__nota {
  margin: 0 0 var(--sp-4);
  max-width: 100%;
  width: 100%;
  font-size: 1.1rem;
  line-height: 1.35;
  color: var(--c-texto-dim);
  text-align: justify;
  hyphens: auto;
  -webkit-hyphens: auto;
  overflow-wrap: break-word;
}
.calendario__cta {
  display: flex;
  justify-content: center;
  padding-bottom: .5rem;
}

/* Botón calendario */
.btn-calendario {
  --btn-h: 3.2rem;
  --btn-radius: 56px;
  --grad-a: #133460;
  --grad-b: #1f4d92;
  --grad-c: #0d0e63;
  --text-color: #f0f6ff;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: var(--btn-h);
  padding: 1rem 1.5rem;
  gap: .55rem;
  font-family: inherit;
  font-size: 1.2rem;
  font-weight: 600;
  letter-spacing: .6px;
  line-height: 1;
  color: var(--text-color);
  text-decoration: none;
  cursor: pointer;
  background: linear-gradient(105deg, var(--grad-a) 0%, var(--grad-b) 52%, var(--grad-c) 120%);
  background-size: 180% 180%;
  border: none;
  border-radius: var(--btn-radius);
  box-shadow: 0 0 0 1px rgba(70, 140, 255, .35), 0 4px 14px -4px rgba(0, 0, 0, .6);
  transition: background-position .9s cubic-bezier(.55, .2, .2, 1), transform .38s cubic-bezier(.22, .9, .3, 1), box-shadow .38s, color .3s;
  -webkit-tap-highlight-color: transparent;
}
.btn-calendario:hover {
  background-position: 100% 50%;
  transform: translateY(-4px);
  box-shadow: 0 6px 24px -6px rgba(0, 0, 0, .7), 0 0 0 1px rgba(160, 210, 255, .4), 0 0 24px -6px rgba(50, 140, 255, .55);
}
.btn-calendario:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px #fff, 0 0 0 5px #2d7bff, 0 0 32px -4px #2d7bff;
}
.btn-calendario:active {
  transform: translateY(-1px) scale(.96);
  background-position: 15% 50%;
  box-shadow: 0 2px 8px -2px rgba(0, 0, 0, .65), 0 0 0 1px rgba(90, 160, 255, .5);
  transition: transform .15s, background-position .25s;
}
.btn-calendario:disabled,
.btn-calendario[aria-disabled="true"] {
  opacity: .45;
  cursor: not-allowed;
  transform: none;
  background-position: 50% 50%;
}

@media (max-width: 480px) {
  .btn-calendario {
    width: 100%;
    padding: .95rem 1.4rem;
    font-size: .95rem;
    background-size: 140% 140%;
  }
}
@media (prefers-reduced-motion: reduce) {
  .btn-calendario,
  .btn-calendario:hover,
  .btn-calendario:active {
    transition: none;
    transform: none;
    background-position: 50% 50%;
  }
}

/* 11. Equipo: miembros, avatares y redes */
.team-card {
  color: #fff;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}
.avatar-wrapper {
  display: block;
  width: 225px;
  aspect-ratio: 1 / 1;
  margin: 0 auto 1rem;
  border-radius: 50%;
  overflow: hidden;
  background: #1d1f23;
  border: 3px solid var(--color-border);
  position: relative;
}
.avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.team-name {
  font-size: 1.2rem;
  font-weight: 600;
  margin: 0 0 .35rem;
  min-height: 1.4em; /* asegura alineación de filas aunque el nombre tenga 1 línea */
}
.team-role {
  font-size: 1.05rem;
  margin: 0 0 .75rem;
  min-height: 1.3em; /* estabiliza altura antes de redes sociales */
}
.team-social {
  list-style: none;
  display: flex;
  justify-content: center;
  gap: .75rem;
  padding: 0;
  margin: 0;
  min-height: 40px;
}
.team-social li {
  margin: 0;
}
.team-social a {
  width: 32px;
  height: 32px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  text-decoration: none;
  transition: background .25s, transform .25s;
  font-size: 1rem;
  line-height: 1;
}
.team-social a:hover,
.team-social a:focus-visible {
  background: #00b2d9;
  transform: translateY(-3px);
  outline: none;
}
@media (max-width: 575.98px) {
  .avatar-wrapper {
    width: 180px;
  }
}

/* 12. Footer: pie de página y enlaces sociales */
.footer {
  padding: 40px 0;
  background-color: rgba(7, 11, 35, 0.9);
  border-top: 1px solid var(--color-border);
}
.social-links a {
  margin-right: 15px;
  font-size: 1.5rem;
  color: var(--color-text);
  transition: color .3s;
}
.social-links a:hover {
  color: var(--color-accent);
}

/* 13. GLightbox: galería de imágenes y descripciones */
.gslide-description {
  background: rgba(24, 27, 31, 0.95) !important;
  padding: .5rem .9rem !important;
  border-radius: 0 0 8px 8px !important;
  text-align: left !important;
  box-shadow: 0 5px 25px rgba(0, 0, 0, .5);
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.gslide-description h4 {
  color: #17d5ff !important;
  font-family: 'Montserrat', sans-serif;
  font-size: 1.4rem !important;
  font-weight: 700 !important;
  line-height: 1.3 !important;
  margin: 0 0 .6rem 0 !important;
}
.gslide-description p {
  color: var(--color-text-muted) !important;
  font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
  font-size: 1.2rem !important;
  font-weight: 400 !important;
  line-height: 1.6 !important;
  margin: 0 0 .8rem 0 !important;
}
.gslide-description small {
  display: block !important;
  color: var(--color-text-muted) !important;
  font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
  font-size: 1.1rem !important;
  font-weight: 500 !important;
  opacity: .8 !important;
  margin: 0 !important;
}

/* 14. Media queries: responsive y accesibilidad */

/* Hover solo en puntero fino */
@media (hover: hover) and (pointer: fine) {
  #actividades .card-footer .btn:hover,
  #actividades .card-footer .btn:focus {
    transform: translateY(-2px) scale(1.04);
    color: #1a2540;
    background: linear-gradient(90deg, #ffe066 10%, #233d6c 100%);
    box-shadow: 0 6px 24px #ffe06644, 0 2px 8px #7cb9e866;
  }
}
  #actividades .section-title {
    margin-bottom: 0.5rem !important;
  }

/* Tablets */
@media (max-width: 991.98px) {
  .bg-stars { display: none; }
  /* Fondo móvil/tablet: versión ligera */
  body {
  background: #0a1128 url("../img/background/galaxybg_100.webp?v=7") top center/cover no-repeat;
    background-attachment: scroll;
  }
  .navbar {
    padding: .8rem 0;
  }
  .navbar-brand img {
    width: 44px;
    height: 44px;
  }
  .navbar-brand span {
    font-size: 1.4rem;
  }
  .navbar-nav {
    gap: .5rem;
  }
  #galeria .row {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  #galeria [class*="col-"] {
    padding-left: 2px !important;
    padding-right: 2px !important;
  }
  .gallery-card .bg-dark {
    width: 100%;
    margin: .05em auto .1em;
    aspect-ratio: 1 / 1;
  }
  /* Reajuste de densidad en navbar colapsada */
  .navbar-nav .nav-link { font-size: 1.05rem; }
}

/* Móviles */
@media (max-width: 767.98px) {
  /* Fondo móvil: mover imagen a pseudo-elemento fijo para evitar artefactos al combinar fondo + navbar fijo */
  .bg-stars { display: none !important; }
  body { position: relative; background: #0a1128; overflow-x: hidden; }
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1; /* detrás de todo el contenido */
    background: #0a1128 center/cover no-repeat;
    background-image: url("../img/background/galaxybg_100.webp?v=4");
    background-image: image-set(
      url("../img/background/galaxybg_100.webp?v=4") 1x,
      url("../img/background/galaxybg_pc.webp?v=4") 2x
    );
    will-change: transform; /* hint: scroll perf */
    transform: translateZ(0); /* fuerza capa propia */
  }
  #galeria > .container {
  /* Avoid 100vw which can introduce horizontal scroll (accounts not for scrollbar width) */
  width: 100%;
  max-width: 100%;
  padding: 0;
  margin: 0;
  }
  #galeria .row,
  #galeria [class*="col-"] {
    padding: 0;
    margin: 0;
  }
  .gallery-card {
    margin: 0 !important;
    border-radius: .7rem;
  }
  .gallery-card .bg-dark {
    width: 100%;
    height: auto;
    margin: 0 auto .05em;
    padding: 0;
    background: rgba(24, 27, 31, 0.035) !important;
    border-radius: .7rem .7rem 0 0;
    aspect-ratio: unset !important;
  }
  .gallery-card picture,
  .gallery-card img {
    width: 100% !important;
    height: auto !important;
    max-width: 100vw !important;
    max-height: 70vw !important;
    object-fit: contain !important;
    background: transparent !important;
    border-radius: .7rem .7rem 0 0;
  }
  #actividades .text-justify-responsive,
  #nosotros .text-justify-responsive {
    text-align: left !important;
  }
  #galeria .text-justify-responsive {
    text-align: center !important;
  }
}

/* --- Responsive refinement patch (minimal overrides to fix mobile spacing & overflow) --- */
@media (max-width: 575.98px) {
  /* Navbar height reduction for small phones */
  :root { --navbar-height: 68px; }
  body { padding-top: var(--navbar-height); }
  .navbar { padding: .55rem 0; }
  .navbar-brand img { width: 48px; height: 48px; }
  .navbar-brand span { font-size: 1.45rem; }
  /* Normalize horizontal padding for main sections while letting hero keep its own */
  section[id]:not(.hero-section) {
    padding-left: 1.1rem;
    padding-right: 1.1rem;
  }
  /* Reduce extra-large button sizing inside actividades cards */
  #actividades .card-footer .btn {
    padding: .85rem 1.25rem;
    font-size: 1.05rem;
    line-height: 1.3;
  }
  /* Calendar: make grid fit narrow phones without forcing horizontal scroll */
  .calendario {
    padding: var(--sp-5) 1rem;
  }
  .calendario__grid {
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: .85rem;
  }
  .mes { min-height: auto; }
  .evento { font-size: .95rem; }
  .evento__fecha { font-size: .9rem; }
  /* Hero buttons: force vertical stacking and full width for easier tapping */
  .hero-buttons { flex-direction: column; align-items: stretch; }
  .hero-buttons .btn { width: 100%; margin-bottom: .6rem; }
  .hero-section h1 { font-size: clamp(1.9rem, 8.4vw, 2.55rem); }
  .hero-section .lead { font-size: clamp(1rem, 4.5vw, 1.25rem); margin-bottom: 1.4rem; }
  /* Nosotros text container compact */
  #nosotros .nosotros-text-bg { margin-bottom: 1.5rem; }
  /* Activity cards tighter body */
  #actividades .card-body { padding: 1rem .9rem .3rem; }
  #actividades p.card-text { font-size: .97rem; }
  /* Event cards image aspect for narrow devices */
  .event-card .bg-dark[style*="height:270px"] { height: 55vw !important; max-height: 230px; }
  /* Gallery cards text size */
  .gallery-card h5 { font-size: 1.02rem; }
  .gallery-card p { font-size: .95rem; }
  /* Equipo avatars slightly smaller already handled; adjust spacing */
  #equipo .team-card { padding: .25rem 0 .8rem; }
  .team-social { gap: .55rem; }
  /* Contacto form adjustments */
  #contacto form label { font-size: .9rem; }
  #contacto form .form-control { padding: .55rem .85rem; font-size: .95rem; }
  #contacto h4 { font-size: 1.1rem; }
  #contacto .btn { padding: .75rem 1.4rem; font-size: 1.05rem; }
  /* Footer adjustments */
  .footer h5, .footer h4 { font-size: 1.05rem; }
  .footer p, .footer li, .footer small { font-size: .85rem; }
}

@media (max-width: 420px) {
  /* Slightly smaller calendar columns on ultra narrow devices */
  .calendario__grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); }
  .navbar-brand span { font-size: 1.25rem; }
  .hero-section h1 { font-size: clamp(1.7rem, 8.8vw, 2.2rem); }
  .hero-section .lead { font-size: clamp(.95rem, 4.8vw, 1.1rem); }
  #actividades .card-footer .btn { width: 100%; }
}

/* Ultra pequeños <380px: compactar aún más equipo y títulos */
@media (max-width: 379.98px) {
  /* Equipo: layout consistente 2 columnas y mayor separación */
  #equipo .row.g-4 { display: grid !important; grid-template-columns: repeat(2,minmax(0,1fr)); gap: 1.4rem 1rem; margin:0; }
  #equipo .team-card { padding: .75rem 1rem 1.25rem; }
  .section-title { font-size: 1.05rem; }
  .avatar-wrapper { width: 130px; }
  .team-name { font-size: .95rem; }
  .team-role { font-size: .75rem; }
  .team-social a { width: 26px; height: 26px; font-size: .75rem; }
  .hero-section .btn { padding: .65rem 1.1rem; font-size: .95rem; }
}
@media (max-width: 411.98px) {
  /* Equipo: forzar 1 columna en <412px y centrar contenido */
  #equipo .row.g-4 { grid-template-columns: 1fr !important; gap: 1.25rem .5rem; justify-items: center; }
  #equipo .row.g-4 > [class*="col-"] { width:100%; display:flex; justify-content:center; }
  #equipo .team-card { padding: .8rem 1rem 1.3rem; text-align:center; width:100%; max-width:340px; }
  #equipo .avatar-wrapper { width: clamp(170px,68vw,240px); margin-left:auto; margin-right:auto; }
  /* Aumentar legibilidad en pantallas estrechas */
  #equipo .team-name { font-size: clamp(1.05rem,4.6vw,1.28rem); }
  #equipo .team-role { font-size: clamp(.9rem,3.9vw,1.05rem); }
  #equipo .team-social { justify-content: center; gap: .85rem; }
  #equipo .team-social a { width: 38px; height: 38px; font-size: 1.05rem; }
}

/* iPad / tablets grandes (portrait & landscape) */
@media (max-width: 1023.98px) {
  /* Galería: forzar 1 columna para mejorar legibilidad y evitar tarjetas demasiado juntas */
  #galeria .row { display: grid !important; grid-template-columns: 1fr; gap: 1.75rem 0; }
  #galeria .row > [class*="col-"] { width:100% !important; max-width:640px; margin-left:auto; margin-right:auto; }
  #galeria .gallery-card { width:100%; }
}

/* === Hero centering universal override === */
.hero-section > .container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  width: 100%;
  max-width: 100%;
  min-height: calc(100dvh - var(--navbar-height));
  padding-top: 2rem;
  padding-bottom: 2rem;
}
.hero-section h1, .hero-section .lead { margin-left: auto; margin-right: auto; }
@media (max-width: 991.98px) {
  .hero-section > .container { padding-top: 2.5rem; padding-bottom: 2.5rem; }
}
@media (max-width: 575.98px) {
  .hero-section > .container { padding-top: 3rem; padding-bottom: 3rem; }
}
@media (min-width: 1024px) and (max-width: 1366px) {
  .hero-section h1 { font-size: clamp(2.6rem, 4vw, 3.6rem); }
  .hero-section .lead { font-size: clamp(1.15rem, 1.8vw, 1.6rem); }
  #equipo .avatar-wrapper { width: 210px; }
  .calendario__grid { grid-template-columns: repeat(auto-fill, minmax(230px, 1fr)); }
  #actividades .card { margin-bottom: 2.2rem; }
}

/* Gap solo para >=1024px (incluye 1366px y superiores) */
@media (min-width: 1024px) {
  /* El gap debe ir en el contenedor flex, no en cada botón */
  .hero-section .d-flex { gap: .0rem; }
  /* Asegura que ningún margen residual aumente la separación */
  .hero-section .d-flex .btn { margin: 0; }
  /* Reducir aún más: solapar levemente bordes con margen negativo ajustable */
  .hero-section .d-flex .btn + .btn { margin-left: -20rem !important; }
}

/* Refuerzo en landscape iPad: ya no se modifica padding para mantener uniformidad */

/* Ajuste de grid del equipo: asegurar envoltura limpia y consistencia de gaps */
#equipo .row.g-4 { row-gap: 2.2rem; }
.team-social { flex-wrap: wrap; }

/* iPad Mini / ancho 768–820px: comprimir navbar y estabilizar sección equipo */
@media (min-width: 768px) and (max-width: 820px) {
  :root { --navbar-height: 70px; }
  body { padding-top: var(--navbar-height); }
  .navbar { padding: .55rem 0; }
  .navbar-brand { gap: 8px; }
  .navbar-brand img { width: 42px; height: 42px; }
  .navbar-brand span { font-size: 1.35rem; letter-spacing: .03em; }
  .navbar-nav { gap: .4rem; overflow-x: visible; }
  .navbar-nav .nav-link { padding: .4rem .55rem; font-size: .82rem; letter-spacing: .015em; }
  /* Enlace más largo (Calendario Astronómico) suele ocupar mucho; reducir aún más.
     Si el orden cambia, actualizar nth-child según corresponda. */
  .navbar-nav .nav-link:nth-child(5) { font-size: .72rem; padding: .38rem .5rem; }
  /* Evitar salto de layout al navegar a #equipo */
  #equipo { scroll-margin-top: calc(var(--navbar-height) + 12px); }
  /* Reducir ligeramente avatar para que filas no empujen márgenes */
  #equipo .avatar-wrapper { width: 200px; }
}

/* Forzar modo hamburguesa (collapse) solo entre 768 y 820px (iPad Mini / Air) */
@media (min-width: 768px) and (max-width: 820px) {
  /* Mostrar el botón toggler aunque navbar-expand-md normalmente lo oculte */
  .navbar.navbar-expand-md .navbar-toggler { display: block; }
  /* Ocultar el menú expandido por defecto */
  .navbar.navbar-expand-md .navbar-collapse { display: none !important; }
  /* Cuando Bootstrap agrega .show al colapsar, se muestra */
  .navbar.navbar-expand-md .navbar-collapse.show { display: block !important; }
  /* Estilos del panel desplegado: similar a móvil, fondo sólido y lista vertical */
  .navbar.navbar-expand-md .navbar-collapse {
    position: absolute;
    top: var(--navbar-height);
    left: 0; right: 0;
    background: rgba(7,11,35,0.96);
    backdrop-filter: blur(4px);
    padding: .75rem 1rem 1rem;
    border-bottom: 1px solid var(--color-border);
    box-shadow: 0 8px 28px -6px rgba(0,0,0,.55);
    animation: navSlideDown .35s var(--easing-standard);
  }
  @keyframes navSlideDown { from { opacity:0; transform: translateY(-8px);} to { opacity:1; transform: translateY(0);} }
  .navbar.navbar-expand-md .navbar-nav { flex-direction: column; align-items: stretch; gap: .25rem; width: 100%; }
  .navbar.navbar-expand-md .navbar-nav .nav-link {
    width: 100%;
    text-align: left;
    padding: .65rem .9rem;
    margin: 0;
    font-size: .95rem;
    border-radius: .55rem;
  }
  .navbar.navbar-expand-md .navbar-nav .nav-link + .nav-link { margin-top: .15rem; }
  /* Ajuste de la versión corta del calendario: restablecer tamaño legible en panel */
  .navbar.navbar-expand-md .navbar-collapse.show .nav-text-short { font-size: inherit; }
}

/* ---------------------------------------------
   NAVBAR RESPONSIVE UNIFICADO >=768px
   Objetivos:
   - Evitar scroll horizontal y saltos
   - Compresión progresiva con clamp
   - Reducción específica del enlace más largo (Calendario)
   - Restablecer tamaños más confortables en >=1200px
---------------------------------------------- */
@media (min-width: 768px) {
  /* Mantener altura estándar para evitar desajustes de scroll al anclar */
  :root { --navbar-height: 76px; }
  body { padding-top: var(--navbar-height); }
  .navbar { padding: .5rem 0; }
  .navbar .container { max-width: 100%; padding: 0 1.1rem; }
  .navbar-brand img { width: 46px; height: 46px; }
  .navbar-brand span { font-size: clamp(1.25rem, 1rem + .8vw, 1.6rem); letter-spacing: .045em; }
  .navbar-nav { flex-wrap: nowrap; gap: .5rem; }
  .navbar-nav .nav-link {
    padding: .42rem .65rem;
    font-size: clamp(.74rem, .66rem + .35vw, .95rem);
    letter-spacing: .02em;
    flex: 0 1 auto;
    white-space: nowrap;
  }
  /* Enlace más largo (ajuste por texto). Usa selector por contenido común. */
  .navbar-nav .nav-link[href*="Calendario"],
  .navbar-nav .nav-link[href*="calendario"],
  .navbar-nav .nav-link:nth-child(5) {
    font-size: clamp(.64rem, .58rem + .32vw, .86rem);
    padding: .4rem .5rem;
    letter-spacing: .01em;
  }
}

/* Fallback de desplazamiento horizontal (solo cuando el menú NO está colapsado):
   excluir 768–820 porque ahí usamos panel vertical hamburguesa */
@media (min-width: 821px) and (max-width: 880px) {
  .navbar-nav { overflow-x: auto; scrollbar-width: none; }
  .navbar-nav::-webkit-scrollbar { display: none; }
}

/* Desktop ancho >=1200px: espaciar y ampliar ligeramente */
@media (min-width: 1200px) {
  :root { --navbar-height: 76px; }
  body { padding-top: var(--navbar-height); }
  .navbar { padding: .65rem 0; }
  .navbar .container { padding: 0 1.5rem; }
  .navbar-brand img { width: 54px; height: 54px; }
  .navbar-brand span { font-size: 1.9rem; }
  .navbar-nav { gap: 1rem; }
  .navbar-nav .nav-link { font-size: 1.05rem; padding: .55rem 1rem; }
  .navbar-nav .nav-link[href*="Calendario"],
  .navbar-nav .nav-link[href*="calendario"],
  .navbar-nav .nav-link:nth-child(5) { font-size: 1rem; padding: .52rem .85rem; }
}

/* (Regla reemplazada por bloque @supports para permitir fallback) */

/* Ahorro de datos: eliminar imágenes de fondo pesadas */
@media (prefers-reduced-data: reduce) {
  body { background: #0a1128 !important; }
  .bg-stars { background: #0a1128 !important; }
}

/* Calendario: forzar 1 columna (mes entero ancho completo) en móviles muy estrechos <412px */
@media (max-width: 411.98px) {
  .calendario__grid { grid-template-columns: 1fr !important; }
  .mes { min-height: auto; }
  /* Fecha compacta: dos columnas (auto fecha + texto) para que el pill no sea tan largo */
  .evento { grid-template-columns: auto 1fr; }
  .evento__fecha { margin-bottom: .15rem; width: auto; min-width: unset; }
}

/* --- Ajuste consolidado final para iPad Mini / Air (768–820px) ---
   Coloca después del bloque unificado >=768 para asegurar precedencia. */
@media (min-width: 768px) and (max-width: 820px) {
  :root { --navbar-height: 70px !important; }
  body { padding-top: var(--navbar-height) !important; }
  .navbar { padding: .55rem 0 !important; }
  /* Hero un poco más compacto para que el contenido principal no requiera tanto scroll inicial */
  .hero-section { padding-top: clamp(4.2rem, 9vh, 5.5rem); padding-bottom: clamp(2rem, 6vh, 4rem); }
  .hero-section h1 { font-size: clamp(2.1rem, 4.2vw, 3rem); }
  .hero-section .lead { font-size: clamp(1rem, 1.6vw, 1.3rem); }
  /* Secciones: reducir márgenes verticales si había saltos innecesarios */
  section[id]:not(.hero-section) { scroll-margin-top: calc(var(--navbar-height) + 10px); }
  /* Equipo: evitar overflow de columnas Bootstrap (4x25% en 768px ≈192px) */
  #equipo .avatar-wrapper { width: 170px !important; max-width: 100%; }
  #equipo .team-name { font-size: 1.05rem; }
  #equipo .team-role { font-size: .9rem; }
  /* Calendario: asegurar no se aplasten columnas si el padding reduce el ancho útil */
  .calendario__grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
  /* Panel colapsado ya vertical: permitir fuente cómoda */
  .navbar.navbar-expand-md .navbar-collapse .nav-link { font-size: .95rem !important; }
}
.gallery-compact-grid { row-gap: 1.25rem; }

/* Optimización de espacio en galería >=768px */
@media (min-width: 768px) {
  #galeria { padding-top: 3.4rem; padding-bottom: 3.4rem; }
  #galeria .section-title { margin-bottom: 2.4rem; }
  #galeria .row > [class*="col-"] { margin-bottom: 2rem; }
  #galeria .gallery-card { box-shadow: 0 3px 10px rgba(0,0,0,.45); }
  #galeria .gallery-card .p-4 { padding: .75rem 1rem .55rem; }
  #galeria .gallery-card h5 { margin-bottom: .45rem; font-size: 1.05rem; }
  #galeria .gallery-card p { font-size: .95rem; }
}

@media (min-width: 992px) {
  #galeria { padding-top: 3.2rem; padding-bottom: 3.2rem; }
  #galeria .row > [class*="col-"] { margin-bottom: 2.1rem; }
  #galeria .gallery-card .bg-dark { aspect-ratio: 4 / 3; }
  #galeria .gallery-card h5 { font-size: 1.03rem; }
  #galeria .gallery-card p { font-size: .93rem; }
}

@media (min-width: 1200px) {
  #galeria .gallery-card { border-left-width: 3px; }
  #galeria .gallery-card .p-4 { padding: .55rem .85rem .35rem; }
}
/* GLightbox refinado: progresivo móvil -> desktop */
.glightbox-container .gslide {display:flex !important; flex-direction:column; justify-content:center; align-items:center; padding:0 !important;}
.glightbox-container .gslide-media {display:flex !important; align-items:center; justify-content:center; width:100%; max-height:100%; margin:0 !important;}
.glightbox-container .gslide-media img,.glightbox-clean .gslide-media img,.glightbox-modern .gslide-media img{object-fit:contain !important; width:auto !important; height:auto !important; max-width:calc(100vw - 44px); max-height:calc(100vh - 180px); background:#000 !important;}
.glightbox-container .gslide.is-portrait .gslide-media img{max-width:calc(100vw - 60px); max-height:calc(100vh - 160px);} /* retratos: un poco más de ancho relativo */
.gslide-description{width:100%; max-width:900px; background:rgba(24,27,31,.95)!important; padding:.65rem .95rem !important; max-height:240px; overflow-y:auto;}
.gslide-description h4{font-size:1.25rem !important; margin:0 0 .55rem !important;}
.gslide-description p{font-size:1rem !important; line-height:1.5 !important; margin:0 0 .6rem !important;}
.gslide-description small{font-size:.85rem !important;}
@media (max-width:575.98px){
  .glightbox-container .gslide-media img{max-width:calc(100vw - 30px); max-height:calc(100vh - 220px);} /* más espacio descripción */
  .gslide-description{max-height:260px; padding:.55rem .8rem !important;}
  .gslide-description h4{font-size:1.15rem !important;}
  .gslide-description p{font-size:.95rem !important;}
  .gslide-description small{font-size:.78rem !important;}
}
@media (min-width:576px) and (max-width:767.98px){
  .glightbox-container .gslide-media img{max-width:calc(100vw - 40px); max-height:calc(100vh - 210px);} /* tablets portrait */
  .gslide-description{max-height:250px;}
}
@media (min-width:768px) and (max-width:991.98px){
  .glightbox-container .gslide-media img{max-width:calc(100vw - 90px); max-height:calc(100vh - 200px);} /* Tablets: más área útil */
  .gslide-description{max-width:860px; max-height:210px;}
  /* Ajuste: dar más alto a la imagen y subirla (menos resta), descripción un poco más baja y con margen para no parecer que corta la foto */
  .glightbox-container .gslide-media img{max-width:calc(100vw - 90px); max-height:calc(100vh - 170px);} /* +30px para la imagen */
  .gslide-description{max-width:840px; max-height:190px; margin-top:.65rem;}
  /* Imágenes verticales: dar todavía más alto y reducir descripción para que no tape */
  .glightbox-container .gslide.is-portrait .gslide-media img{max-height:calc(100vh - 150px);} /* +20px vertical extra */
  .glightbox-container .gslide.is-portrait .gslide-description{max-height:170px; margin-top:.55rem;}
}
@media (min-width:992px){
  .glightbox-container .gslide-media img{max-width:calc(100vw - 220px); max-height:calc(100vh - 240px);} /* desktop mediano */
  .gslide-description{max-height:210px;}
}
@media (min-width:1200px){
  .glightbox-container .gslide-media img{max-width:calc(100vw - 280px); max-height:calc(100vh - 230px);} /* desktop grande */
  .gslide-description{max-height:200px;}
}

/* Galería: ajustes de espaciado responsive conservando diseño base */
@media (min-width:768px) and (max-width:991.98px){
  #galeria .gallery-card .bg-dark { aspect-ratio:4 / 3; }
  #galeria .gallery-card picture,#galeria .gallery-card img { object-fit:cover; }
  #galeria .gallery-card .p-4 { padding:.6rem .85rem .45rem; }
  #galeria .gallery-card h5 { font-size:1.02rem; }
  #galeria .gallery-card p { font-size:.9rem; }
}
@media (max-width: 575.98px){
  #galeria .gallery-card { border-left-width:3px; }
  #galeria .row > [class*="col-"] { margin-bottom:1.3rem; }
  #galeria .gallery-card .p-4 { padding:.6rem .75rem .45rem; }
  #galeria .gallery-card h5 { font-size:1.05rem; }
  #galeria .gallery-card p { font-size:.9rem; }
}
@media (min-width:576px) and (max-width:767.98px){
  #galeria .row > [class*="col-"] { margin-bottom:1.6rem; }
  #galeria { padding-top:3.1rem; padding-bottom:3.1rem; }
}

/* Layout de 1 columna para Actividades y Galería en dispositivos >412px y <1024px */
@media (min-width: 413px) and (max-width: 1023.98px) {
  #actividades .row > [class*="col-md-"],
  #actividades .row > [class*="col-sm-"],
  #actividades .row > [class*="col-lg-"],
  #actividades .row > [class*="col-6"],
  #galeria .row > [class*="col-sm-"],
  #galeria .row > [class*="col-lg-"],
  #galeria .row > [class*="col-12"],
  #galeria .row > [class*="col-6"] {
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }
  #galeria .row { margin-left: 0; margin-right: 0; }
  #galeria [class*="col-"] { padding-left: .5rem; padding-right: .5rem; }
  /* Equipo en una sola columna */
  #equipo .row > [class*="col-"] { flex: 0 0 100% !important; max-width: 100% !important; }
  #equipo .team-card { max-width: 500px; margin-left: auto; margin-right: auto; }
}

/* Mejora de nitidez en tablets: REEMPLAZAR este bloque final */
@media (min-width: 768px) and (max-width: 991.98px){
  .bg-stars { display: none !important; }  /* no reactivar la capa fija */
  body { background: #0a1128 url("../img/background/galaxybg_100.webp?v=7") center/cover no-repeat; }
}